---
import { getLangFromUrl, useTranslations, useLocations } from "../i18n/utils";
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const l = useLocations(lang);

import { Image } from "astro:assets";
import logo from "../assets/logo.svg";
import telegramIcon from "../assets/telegram.svg";
import rssIcon from "../assets/icons/rss.svg";
---

<nav class="navbar navbar-expand-lg mb-4 mt-2">
  <div class="container">
    <a class="navbar-brand col-md-4 col-lg-3 col-xl-2" href={l("main")}>
      <Image src={logo} loading="eager" alt="aleksandrov logo" />
      <span class="align-bottom">ALEKSANDROV</span>
    </a>
    <div class="col-md-3 d-inline d-lg-none">
      <a href={t("links.tgchannel")} class="me-2 ms-md-5">
        <Image src={telegramIcon} loading="eager" alt="telegram logo" />
      </a>
      <button
        class="navbar-toggler ms-0"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
    <div class="collapse col navbar-collapse" id="navbarNav">
      <ul class="navbar-nav col justify-content-lg-evenly">
        <li class="nav-item">
          <a class="nav-link" href={l("articles")}>
            {t("nav.articles")}
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={l("author")}>
            {t("nav.author")}
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://enabling.team"> enabling.team </a>
        </li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link me-2" href={"mailto:" + t("links.email")}>
            {t("links.email")}
          </a>
        </li>
        <li class="nav-item">
          <a href={t("links.tgchannel")}>
            <Image src={telegramIcon} loading="eager" alt="telegram logo" />
          </a>
        </li>
        <li class="nav-item ms-2">
          <a href={new URL(`${lang}/blog/feed.xml/`, Astro.site)}>
            <Image
              height="43"
              width="43"
              src={rssIcon}
              loading="eager"
              alt="rss logo"
            />
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<style>
  .nav-item a {
    color: #2c2c2b;
  }

  .navbar-brand {
    font-size: 1.5rem;
    font-weight: bold;
    letter-spacing: 1.5px;
  }

  .navbar-toggler {
    background-color: rgb(108, 56, 255);
    padding: 0.175rem 0.525rem;
  }

  .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
  }
</style>
